---
name: react-error-handling
description: Reactアプリのエラーハンドリング方針。APIエラー表示、エラーバウンダリの設計で使用する。
---

# エラーハンドリング方針

## APIエラーの表示

- APIエラーは統一されたエラーコンポーネント（ErrorDisplay等）で表示する
- 開発環境（`import.meta.env.DEV`）ではスタックトレースやレスポンス詳細を表示する
- 本番環境ではユーザー向けの簡潔なメッセージのみ表示する

## Error Boundaryの配置

- ページ単位でError Boundaryを配置する
- Error Boundaryには「再試行」ボタンを含め、ユーザーが復帰操作できるようにする
- TanStack Queryの`useErrorBoundary`オプションと組み合わせて使用する

## エラーの分類と対応

| エラー種別 | 対応 |
|-----------|------|
| ネットワークエラー | リトライを促すUIを表示 |
| 404 | 専用404ページへ遷移 |
| 認証エラー（401/403） | ログイン画面へリダイレクト |
| サーバーエラー（500系） | 汎用エラーページを表示 |
| バリデーションエラー | フォーム上にインラインでエラー表示 |